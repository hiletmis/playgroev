"use strict";(self.webpackChunkplaygroev=self.webpackChunkplaygroev||[]).push([[843],{30843:(e,t,n)=>{n.d(t,{SIWEController:()=>w});var i=n(39839);n(10567);Symbol();const s=Symbol();const r=Object.getPrototypeOf,o=new WeakMap,a=e=>e&&(o.has(e)?o.get(e):r(e)===Object.prototype||r(e)===Array.prototype),l=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];o.set(e,t)},c=e=>"object"===typeof e&&null!==e,u=new WeakMap,g=new WeakSet,d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.is,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t)=>new Proxy(e,t),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>c(e)&&!g.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>{switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e}},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new WeakMap,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;const s=r.get(e);if((null==s?void 0:s[0])===t)return s[1];const a=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return l(a,!0),r.set(e,[t,a]),Reflect.ownKeys(e).forEach((t=>{if(Object.getOwnPropertyDescriptor(a,t))return;const i=Reflect.get(e,t),{enumerable:s}=Reflect.getOwnPropertyDescriptor(e,t),r={value:i,enumerable:s,configurable:!0};if(g.has(i))l(i,!1);else if(i instanceof Promise)delete r.value,r.get=()=>n(i);else if(u.has(i)){const[e,t]=u.get(i);r.value=o(e,t(),n)}Object.defineProperty(a,t,r)})),Object.preventExtensions(a)},d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new WeakMap,f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[1,1],h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:i=>{if(!c(i))throw new Error("object required");const r=d.get(i);if(r)return r;let l=f[0];const p=new Set,w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:++f[0];l!==t&&(l=t,p.forEach((n=>n(e,t))))};let v=f[1];const y=e=>(t,n)=>{const i=[...t];i[1]=[e,...i[1]],w(i,n)},b=new Map,S=e=>{var t;const n=b.get(e);n&&(b.delete(e),null==(t=n[1])||t.call(n))},m=Array.isArray(i)?[]:Object.create(Object.getPrototypeOf(i)),C={deleteProperty(e,t){const n=Reflect.get(e,t);S(t);const i=Reflect.deleteProperty(e,t);return i&&w(["delete",[t],n]),i},set(t,i,r,o){const l=Reflect.has(t,i),f=Reflect.get(t,i,o);if(l&&(e(f,r)||d.has(r)&&e(f,d.get(r))))return!0;S(i),c(r)&&(r=(e=>a(e)&&e[s]||null)(r)||r);let v=r;if(r instanceof Promise)r.then((e=>{r.status="fulfilled",r.value=e,w(["resolve",[i],e])})).catch((e=>{r.status="rejected",r.reason=e,w(["reject",[i],e])}));else{!u.has(r)&&n(r)&&(v=h(r));const e=!g.has(v)&&u.get(v);e&&((e,t)=>{if(b.has(e))throw new Error("prop listener already exists");if(p.size){const n=t[3](y(e));b.set(e,[t,n])}else b.set(e,[t])})(i,e)}return Reflect.set(t,i,v,o),w(["set",[i],r,f]),!0}},E=t(m,C);d.set(i,E);const x=[m,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:++f[1];return v===e||p.size||(v=e,b.forEach((t=>{let[n]=t;const i=n[1](e);i>l&&(l=i)}))),l},o,e=>{p.add(e),1===p.size&&b.forEach(((e,t)=>{let[n,i]=e;if(i)throw new Error("remove already exists");const s=n[3](y(t));b.set(t,[n,s])}));return()=>{p.delete(e),0===p.size&&b.forEach(((e,t)=>{let[n,i]=e;i&&(i(),b.set(t,[n]))}))}}];return u.set(E,x),Reflect.ownKeys(i).forEach((e=>{const t=Object.getOwnPropertyDescriptor(i,e);"value"in t&&(E[e]=i[e],delete t.value,delete t.writable),Object.defineProperty(m,e,t)})),E};return[h,u,g,e,t,n,i,r,o,d,f]},[f]=d();function h(e,t,n){const i=u.get(e);let s;i||console.warn("Please use proxy object");const r=[],o=i[3];let a=!1;const l=o((e=>{r.push(e),n?t(r.splice(0)):s||(s=Promise.resolve().then((()=>{s=void 0,a&&t(r.splice(0))})))}));return a=!0,()=>{a=!1,l()}}Symbol();const p=function(){return f(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}({status:"uninitialized"}),w={state:p,subscribeKey:(e,t)=>function(e,t,n,i){let s=e[t];return h(e,(()=>{const i=e[t];Object.is(s,i)||n(s=i)}),i)}(p,e,t),subscribe:e=>h(p,(()=>e(p))),_getClient(){if(!p._client)throw new Error("SIWEController client not set");return p._client},async getNonce(){const e=this._getClient(),t=await e.getNonce();return this.setNonce(t),t},async getSession(){const e=this._getClient(),t=await e.getSession();return t&&(this.setSession(t),this.setStatus("success")),t},createMessage(e){const t=this._getClient().createMessage(e);return this.setMessage(t),t},async verifyMessage(e){const t=this._getClient();return await t.verifyMessage(e)},async signIn(){const e=this._getClient();return await e.signIn()},async signOut(){var e;const t=this._getClient();await t.signOut(),this.setStatus("ready"),null===(e=t.onSignOut)||void 0===e||e.call(t)},onSignIn(e){var t;const n=this._getClient();null===(t=n.onSignIn)||void 0===t||t.call(n,e)},onSignOut(){var e;const t=this._getClient();null===(e=t.onSignOut)||void 0===e||e.call(t)},setSIWEClient(e){var t;p._client=(t=e,g.add(t),t),p.status="ready",i.OptionsController.setIsSiweEnabled(e.options.enabled)},setNonce(e){p.nonce=e},setStatus(e){p.status=e},setMessage(e){p.message=e},setSession(e){p.session=e}};var v,y=n(79378),b=n(46005),S=n(21201);const m=(0,S.AH)(v||(v=(0,y.A)(["\n  :host {\n    display: flex;\n    justify-content: center;\n    gap: var(--wui-spacing-2xl);\n  }\n\n  wui-visual-thumbnail:nth-child(1) {\n    z-index: 1;\n  }\n"])));var C,E=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let x=class extends S.WF{constructor(){var e;super(...arguments),this.dappImageUrl=null===(e=i.OptionsController.state.metadata)||void 0===e?void 0:e.icons,this.walletImageUrl=i.iT.getConnectedWalletImageUrl()}firstUpdated(){var e;const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelectorAll("wui-visual-thumbnail");null!==t&&void 0!==t&&t[0]&&this.createAnimation(t[0],"translate(18px)"),null!==t&&void 0!==t&&t[1]&&this.createAnimation(t[1],"translate(-18px)")}render(){var e;return(0,S.qy)(C||(C=(0,y.A)(["\n      <wui-visual-thumbnail\n        ?borderRadiusFull=","\n        .imageSrc=","\n      ></wui-visual-thumbnail>\n      <wui-visual-thumbnail .imageSrc=","></wui-visual-thumbnail>\n    "])),!0,null===(e=this.dappImageUrl)||void 0===e?void 0:e[0],this.walletImageUrl)}createAnimation(e,t){e.animate([{transform:"translateX(0px)"},{transform:t}],{duration:1600,easing:"cubic-bezier(0.56, 0, 0.48, 1)",direction:"alternate",iterations:1/0})}};x.styles=m,x=E([(0,b.customElement)("w3m-connecting-siwe")],x);var O,j=n(71171),R=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};let A=class extends S.WF{constructor(){var e;super(...arguments),this.dappName=null===(e=i.OptionsController.state.metadata)||void 0===e?void 0:e.name,this.isSigning=!1}render(){var e;return(0,S.qy)(O||(O=(0,y.A)(['\n      <wui-flex justifyContent="center" .padding=',">\n        <w3m-connecting-siwe></w3m-connecting-siwe>\n      </wui-flex>\n      <wui-flex\n        .padding=",'\n        gap="s"\n        justifyContent="space-between"\n      >\n        <wui-text variant="paragraph-500" align="center" color="fg-100"\n          >'," needs to connect to your wallet</wui-text\n        >\n      </wui-flex>\n      <wui-flex\n        .padding=",'\n        gap="s"\n        justifyContent="space-between"\n      >\n        <wui-text variant="small-400" align="center" color="fg-200"\n          >Sign this message to prove you own this wallet and proceed. Canceling will disconnect\n          you.</wui-text\n        >\n      </wui-flex>\n      <wui-flex .padding=',' gap="s" justifyContent="space-between">\n        <wui-button\n          size="md"\n          ?fullwidth=','\n          variant="shade"\n          @click=','\n          data-testid="w3m-connecting-siwe-cancel"\n        >\n          Cancel\n        </wui-button>\n        <wui-button\n          size="md"\n          ?fullwidth=','\n          variant="fill"\n          @click=',"\n          ?loading=",'\n          data-testid="w3m-connecting-siwe-sign"\n        >\n          ',"\n        </wui-button>\n      </wui-flex>\n    "])),["2xl","0","xxl","0"],["0","4xl","l","4xl"],null!==(e=this.dappName)&&void 0!==e?e:"Dapp",["0","3xl","l","3xl"],["l","xl","xl","xl"],!0,this.onCancel.bind(this),!0,this.onSign.bind(this),this.isSigning,this.isSigning?"Signing...":"Sign")}async onSign(){this.isSigning=!0,i.En.sendEvent({event:"CLICK_SIGN_SIWE_MESSAGE",type:"track"});try{w.setStatus("loading");const e=await w.signIn();return w.setStatus("success"),i.En.sendEvent({event:"SIWE_AUTH_SUCCESS",type:"track"}),e}catch(e){return i.SnackController.showError("Signature declined"),w.setStatus("error"),i.En.sendEvent({event:"SIWE_AUTH_ERROR",type:"track"})}finally{this.isSigning=!1}}async onCancel(){const{isConnected:e}=i.AccountController.state;e?(await i.ConnectionController.disconnect(),i.W3.close()):i.RouterController.push("Connect"),i.En.sendEvent({event:"CLICK_CANCEL_SIWE",type:"track"})}};R([(0,j.wk)()],A.prototype,"isSigning",void 0),A=R([(0,b.customElement)("w3m-connecting-siwe-view")],A)}}]);
//# sourceMappingURL=843.cc5410ff.chunk.js.map